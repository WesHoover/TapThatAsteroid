<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Tap That Asteroid</title>

  <link rel="stylesheet" href="./css/master.css" media="screen" title="no title" charset="utf-8">
  <script src="https://code.jquery.com/jquery-1.11.3.min.js" charset="utf-8"></script>
  <script src="https://code.jquery.com/jquery-2.1.4.min.js" charset="utf-8"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
  <script src="./js/request.js" charset="utf-8"></script>

</head>

<body>
  <div id="page-wrapper">
    <div id="content-wrapper">
      <h1>Tap That Asteroid</h1>
      <h2>a small tool to visualize asteroid data</h2>
      <input id="search" type="button" value="Load Viz"/>
    </div>
    <!-- SVG Viz Goes Here -->
  </div>

  <script type="text/javascript">
    function getAsteroids() { // Get data for asteroids
      alert('here we go!');

      $.ajax({
        url: 'http://www.asterank.com/api/asterank?query={%22diameter%22:{%22$lt%22:1000}}&limit=1000',
        dataType: 'json',
        success: function(data) {
          createD3(data);
        },
        error: function(xhr, status, error) {
          console.log("An error occured: " + xhr.status + " " + xhr.statusText);
          console.log(error);
        },
      });
    }

    function createD3(data) {
      var width = 900,height = 900;

      var viz = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height)
        .append("g")
          .attr("transform", "translate(50,50)");

      var pack = d3.layout.pack()
        .size([width, height - 50])
        .padding(10);

      // Passing Data to the viz
      var nodes = pack.nodes(data[0]);
        console.log(nodes);
    }

    getAsteroids();

  </script>
</body>

</html>
